name: Build SU2

on: [push]

jobs:
  build:
    strategy:
      matrix: 
        commands: ['-Denable-pywrapper=true', '-Denable-autodiff=true -Denable-normal=false', '-Denable-directdiff=true -Denable-normal=false']
    runs-on: ubuntu-latest
    steps:
    - name: Build
      uses: docker://docker.pkg.github.com/su2code/su2/build-su2:latest
      with:
        args: ${{github.sha}} $HOME ${{matrix.commands}}
    - name: Upload Binaries 
      uses: actions/upload-artifact@v1
      with:
        name: ${{ matrix.commands }}
        path: $HOME/bin

